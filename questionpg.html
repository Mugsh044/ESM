<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Advanced Quiz | ES Mudasomwa</title>
  <style>
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #74ebd5, #9face6);
      min-height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .quiz-container {
      background: #fff;
      padding: 38px 32px 28px 32px;
      border-radius: 14px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.13);
      max-width: 480px;
      width: 100%;
      margin: 40px 0;
      text-align: center;
    }
    .quiz-container h2 {
      color: #005ca9;
      margin-bottom: 18px;
      font-size: 2rem;
    }
    .quiz-question {
      font-size: 1.18rem;
      margin-bottom: 18px;
      color: #2c3e50;
      font-weight: bold;
    }
    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 18px;
    }
    .quiz-option, .quiz-multi-label {
      background: #e0eafc;
      border: 1.5px solid #0072ce;
      border-radius: 8px;
      padding: 10px 16px;
      font-size: 1.05rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, border 0.2s;
      text-align: left;
      display: block;
      margin-bottom: 0;
      user-select: none;
    }
    .quiz-option.selected, .quiz-multi-label.selected {
      background: #ffd200;
      color: #005ca9;
      border: 2px solid #ffd200;
      font-weight: bold;
    }
    .quiz-option.correct, .quiz-multi-label.correct {
      background: #c8e6c9;
      color: #219150;
      border: 2px solid #219150;
    }
    .quiz-option.incorrect, .quiz-multi-label.incorrect {
      background: #ffcdd2;
      color: #d32f2f;
      border: 2px solid #d32f2f;
    }
    .quiz-multi-label input[type="checkbox"] {
      margin-right: 8px;
      accent-color: #0072ce;
      transform: scale(1.2);
      vertical-align: middle;
    }
    .quiz-actions {
      margin-top: 18px;
    }
    .quiz-btn {
      background: linear-gradient(90deg, #0072ce 0%, #ffd200 100%);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 10px 28px;
      font-size: 1.08rem;
      font-weight: bold;
      cursor: pointer;
      margin: 0 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: background 0.2s, color 0.2s;
    }
    .quiz-btn:hover {
      background: linear-gradient(90deg, #ffd200 0%, #0072ce 100%);
      color: #0072ce;
    }
    .quiz-progress {
      margin: 18px 0 10px 0;
      color: #0072ce;
      font-weight: bold;
    }
    .quiz-score {
      font-size: 1.2rem;
      color: #219150;
      font-weight: bold;
      margin: 18px 0 10px 0;
    }
    .quiz-summary {
      margin-top: 18px;
      background: #e0eafc;
      border-radius: 10px;
      padding: 18px 10px;
      color: #2c3e50;
      font-size: 1.08rem;
      text-align: left;
    }
    @media (max-width: 600px) {
      .quiz-container {
        padding: 18px 4px 18px 4px;
        max-width: 99vw;
      }
    }
  </style>
</head>
<body>
  <div class="quiz-container" id="quizContainer">
    <h2>Quick Quiz</h2>
    <div class="quiz-progress" id="quizProgress"></div>
    <div class="quiz-question" id="quizQuestion"></div>
    <div class="quiz-options" id="quizOptions"></div>
    <div class="quiz-actions">
      <button class="quiz-btn" id="nextBtn" onclick="nextQuizQuestion()" disabled>Next</button>
      <button class="quiz-btn" id="restartBtn" onclick="restartQuiz()" style="display:none;">Restart</button>
    </div>
    <div class="quiz-score" id="quizScore"></div>
    <div class="quiz-summary" id="quizSummary"></div>
  </div>

  <script>
    // Advanced quiz questions: supports single and multi-select
    const quizQuestions = [
      {
        question: "What does ES Mudasomwa stand for?",
        options: [
          "Ecole Secondaire Mudasomwa",
          "Ecole Superieure Mudasomwa",
          "Ecole Scolaire Mudasomwa",
          "Ecole Secondaire Musanze"
        ],
        answer: 0
      },
      {
        question: "Which of the following is NOT a common subject at A'Level?",
        options: ["Mathematics", "Physics", "History", "Cooking"],
        answer: 3
      },
      {
        question: "Who is the Head School at ES Mudasomwa?",
        options: ["Mr. Brian K.", "Mrs. Francoise AB.", "Mr. Jean Claude", "Ms. Betty"],
        answer: 1
      },
      {
        question: "Which color is dominant in ES Mudasomwa's website theme?",
        options: ["Red", "Blue", "Green", "Yellow"],
        answer: 1
      },
      {
        question: "What is the main call-to-action on the homepage?",
        options: ["Contact Us", "Apply Now", "Download Prospectus", "Join Club"],
        answer: 1
      },
      // ADVANCED MULTI-SELECT QUESTION
      {
        question: "Which of the following are features of a modern school website? (Select all that apply)",
        options: [
          "Responsive design for mobile devices",
          "Online application forms",
          "Animated background music",
          "News and events section"
        ],
        answer: [0, 1, 3], // Multiple correct answers
        multi: true
      }
    ];

    let currentQuestion = 0;
    let score = 0;
    let selectedOption = null;

    function renderQuiz() {
      document.getElementById('quizSummary').style.display = 'none';
      document.getElementById('quizScore').textContent = '';
      if (currentQuestion < quizQuestions.length) {
        const q = quizQuestions[currentQuestion];
        document.getElementById('quizProgress').textContent = `Question ${currentQuestion + 1} of ${quizQuestions.length}`;
        document.getElementById('quizQuestion').textContent = q.question;
        const optionsDiv = document.getElementById('quizOptions');
        optionsDiv.innerHTML = '';
        if (q.multi) {
          // Multi-select: use checkboxes
          q.options.forEach((opt, idx) => {
            const label = document.createElement('label');
            label.className = 'quiz-multi-label';
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.value = idx;
            checkbox.className = 'quiz-multi-option';
            label.appendChild(checkbox);
            label.appendChild(document.createTextNode(' ' + opt));
            optionsDiv.appendChild(label);
          });
          document.getElementById('nextBtn').disabled = false;
          document.getElementById('nextBtn').onclick = () => selectMultiOption();
        } else {
          q.options.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'quiz-option';
            btn.textContent = opt;
            btn.onclick = () => selectOption(idx, btn);
            optionsDiv.appendChild(btn);
          });
          document.getElementById('nextBtn').disabled = true;
          document.getElementById('nextBtn').onclick = nextQuizQuestion;
        }
        document.getElementById('nextBtn').style.display = '';
        document.getElementById('restartBtn').style.display = 'none';
      } else {
        showQuizResult();
      }
    }

    function selectOption(idx, btn) {
      if (selectedOption !== null) return; // Prevent changing answer
      selectedOption = idx;
      const q = quizQuestions[currentQuestion];
      const options = document.querySelectorAll('.quiz-option');
      options.forEach((optionBtn, i) => {
        optionBtn.classList.remove('selected', 'correct', 'incorrect');
        if (i === idx) optionBtn.classList.add('selected');
      });
      if (idx === q.answer) {
        btn.classList.add('correct');
        score++;
      } else {
        btn.classList.add('incorrect');
        options[q.answer].classList.add('correct');
      }
      document.getElementById('nextBtn').disabled = false;
    }

    function selectMultiOption() {
      const q = quizQuestions[currentQuestion];
      const checked = Array.from(document.querySelectorAll('.quiz-multi-option'))
        .map((cb, idx) => cb.checked ? idx : null)
        .filter(idx => idx !== null);
      // Compare arrays
      const correct = q.answer.sort().join(',') === checked.sort().join(',');
      // Show feedback
      const labels = document.querySelectorAll('.quiz-multi-label');
      labels.forEach((label, idx) => {
        label.classList.remove('selected', 'correct', 'incorrect');
        const cb = label.querySelector('input');
        if (q.answer.includes(idx) && checked.includes(idx)) {
          label.classList.add('correct', 'selected'); // correct and selected
        } else if (q.answer.includes(idx)) {
          label.classList.add('correct'); // correct but not selected
        } else if (checked.includes(idx)) {
          label.classList.add('incorrect', 'selected'); // selected but incorrect
        }
        cb.disabled = true;
      });
      if (correct) score++;
      document.getElementById('nextBtn').disabled = true;
      setTimeout(() => {
        currentQuestion++;
        selectedOption = null;
        renderQuiz();
      }, 1200);
    }

    function nextQuizQuestion() {
      currentQuestion++;
      selectedOption = null;
      renderQuiz();
    }

    function showQuizResult() {
      document.getElementById('quizQuestion').textContent = '';
      document.getElementById('quizOptions').innerHTML = '';
      document.getElementById('quizProgress').textContent = '';
      document.getElementById('nextBtn').style.display = 'none';
      document.getElementById('restartBtn').style.display = '';
      document.getElementById('quizScore').textContent = `Your Score: ${score} / ${quizQuestions.length}`;
      // Show summary
      let summary = "<strong>Quiz Summary:</strong><ul>";
      quizQuestions.forEach((q, i) => {
        let correctAns = Array.isArray(q.answer)
          ? q.answer.map(idx => q.options[idx]).join(', ')
          : q.options[q.answer];
        summary += `<li><strong>Q${i+1}:</strong> ${q.question}<br>
        <span style="color:#219150;">Correct Answer:</span> ${correctAns}</li>`;
      });
      summary += "</ul>";
      const summaryDiv = document.getElementById('quizSummary');
      summaryDiv.innerHTML = summary;
      summaryDiv.style.display = 'block';
    }

    function restartQuiz() {
      currentQuestion = 0;
      score = 0;
      selectedOption = null;
      renderQuiz();
    }

    // Initialize quiz